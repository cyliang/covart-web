{% load static %}
{% load google_analytics %}
<!DOCTYPE html>
<html>
<head>
    {% google_analytics %}
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="author" content="Chih-Yung Liang">

    <title>Covart Lab - {% block title %}Compiler Optimization, Virtualization, and Adaptive Runtime{% endblock %}</title>

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/tocas-ui/2.3.2/tocas.css">
</head>
<body>
    {% block menu %}
    {% if menu_attached %}
    <div class="ts attached inverted menu">
    {% else %}
    <div class="ts raised menu">
    {% endif %}
        <div class="ts container">
            <a class="image item" href="{% url 'website:index' %}">
                <img class="ts tiny image" src="{% static "website/logo-stripped.png" %}">
            </a>
            <div class="ts item dropdown">
                <div class="text">About</div>
                <i class="dropdown icon"></i>
                <div class="menu">
                    <a class="item" href="{% url 'website:members' %}">Members</a>
                    <a class="item" href="{% url 'website:publications' %}">Publications</a>
                </div>
            </div>
            <div class="ts item dropdown">
                <div class="text">Meeting</div>
                <i class="dropdown icon"></i>
                <div class="menu">
                    <a class="item" href="{% url 'meeting:schedule' %}">Schedule</a>
                    <a class="item" href="{% url 'meeting:history' %}">History</a>
                    <a class="item" href="{% url 'meeting:attendance' %}">Attendance Statistic</a>
                </div>
            </div>
            <a class="item" href="{% url 'website:activities' %}">Activities</a>

            <div class="ts right item floating dropdown" style="padding: 0 10px 0 10px;">
                <div class="text">
                    {% if user.is_authenticated %}
                    <img class="ts circular image" src="{{ user.member.get_picture_url }}" style="margin: 0">
                    {% else %}
                    <i class="user icon" style="margin: auto"></i>
                    {% endif %}
                </div>
                <div class="menu">
                    {% if user.is_authenticated %}
                    <div class="ts top attached card">
                        <div class="image">
                            <img src="{{ user.member.get_picture_url }}">
                            <div class="header">{{ user.member.name }}</div>
                        </div>
                    </div>
                    <div class="divider"></div>
                    <a class="item" href="{{ user.member.get_absolute_url }}">View profile</a>
                    <a class="item" href="{% url 'website:member-update' %}">Update profile</a>
                    <a class="item" href="{% url 'logout' %}">Logout</a>
                    {% else %}
                    <a class="item" href="{% url 'login' %}">Login</a>
                    {% endif %}
                </div>
            </div>
        </div>
    </div>
    {% endblock %}

    {% block content %}{% endblock %}

    {% block footer %}
    <div class="ts top attached borderless tertiary segment">
    <div class="ts container">
        <div class="ts grid">
            <div class="two wide tablet two wide computer four wide mobile column">
                <img class="ts image" src="{% static 'website/logo.png' %}">
            </div>
            <div class="tablet or large device only one wide column"></div>
            <div class="stretched column" style="margin-top: auto; margin-bottom: auto;">
                <p>
                    台北市大安區羅斯福路四段1號 德田館404室<br>
                    02-33664888 ext. 404
                </p>
            </div>
            <div class="tablet or large device only column" style="margin-top: auto; margin-bottom: auto;">
                <div class="ts very compact mini separated buttons">
                    <a class="ts basic button" href="{% url 'website:links' %}">Links (Internal use)</a>
                    <a class="ts basic negative button" href="{% url 'admin:index' %}">Admin</a>
                </div>
            </div>
            <div class="mobile only sixteen wide column">
                <div class="ts very compact mini fluid separated buttons">
                    <a class="ts basic button" href="{% url 'website:links' %}">Links (Internal use)</a>
                    <a class="ts basic negative button" href="{% url 'admin:index' %}">Admin</a>
                </div>
            </div>
        </div>
    </div>
    </div>
    {% endblock %}

    <script src="https://cdnjs.cloudflare.com/ajax/libs/tocas-ui/2.3.2/tocas.js"></script>
    <script>
    ts('.ts.dropdown:not(.basic)').dropdown();
    </script>
    {% block script %}{% endblock %}
</body>
</html>
